<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:file="http://www.mulesoft.org/schema/mule/file" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd http://www.mulesoft.org/schema/mule/ee/dw http://www.mulesoft.org/schema/mule/ee/dw/current/dw.xsd http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd"><flow name="orderServiceFILE"><logger  level="USER" message="File Poller Order Service Terminated" /><flow-ref name="LogandErrorHandlerDummy"  doc:name="LogandErrorHandler"  /><set-variable  xmlns:ns0="http://www.mulesoft.org/schema/mule/core" name="SetVariable" variableName="" value="" posX="134" posY="208"/><ee:transform xmlns:ns0="http://www.mulesoft.org/schema/mule/core" xmlns:ns1="http://www.mulesoft.org/schema/mule/ee/core" name="Parse_Data" type="ParseActivity" posX="233" posY="79"><ee:message><ee:set-payload><![CDATA[%dw 2.0
output application/xml
---
{
<?xml version="1.0" encoding="UTF-8"?>
<config>
            <InputType>String</InputType>
            <Encoding>ASCII</Encoding>
            <ParseSharedConfig>/DataFormat/OrderServiceDataFormat.sharedparse</ParseSharedConfig>
        </config>
<?xml version="1.0" encoding="UTF-8"?>
<ns0:inputBindings xmlns:ns0="http://xmlns.tibco.com/bw/process/2003">
            <Input>
                <text>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$File-Poller/ee:EventSourceOuputTextClass/fileContent/textContent"/>
                </text>
                <noOfRecords>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="-1"/>
                </noOfRecords>
            </Input>
        </ns0:inputBindings>}]]></ee:set-payload></ee:message></ee:transform><logger  level="USER" message="concat(File Poller Order Service Started with counter value =, $SetVariable/root/counter)" /><file:listener directory="/" config-ref="File_Config" path="/" <scheduling-strategy ><cron expression="migration-default" /></scheduling-strategy></file:listener><flow-ref name="createOrderDummy"  doc:name="createOrder"  /><file:copy config-ref="File_Config" path="/"  xmlns:ns0="http://www.mulesoft.org/schema/mule/core" xmlns:ns1="http://www.mulesoft.org/schema/mule/file" name="Copy_File" connector-ref="FILE_Configuration" path="" posX="374" posY="254" type="FileCopyActivity"/><file:rename config-ref="File_Config" path="/"  xmlns:ns0="http://www.mulesoft.org/schema/mule/core" xmlns:ns1="http://www.mulesoft.org/schema/mule/file" name="Rename_File" connector-ref="FILE_Configuration" path="" posX="491" posY="255" type="FileRenameActivity"/><file:delete config-ref="File_Config" path="/"  xmlns:ns0="http://www.mulesoft.org/schema/mule/core" xmlns:ns1="http://www.mulesoft.org/schema/mule/file" name="Remove_File" connector-ref="FILE_Configuration" path="concat($_globalVariables/ns3:GlobalVariables/Connections/FILE/inDir,$_globalVariables/ns3:GlobalVariables/Connections/FILE/fileName)" posX="730" posY="212" type="FileRemoveActivity"/><file:list config-ref="File_Config" path="/"  xmlns:ns0="http://www.mulesoft.org/schema/mule/core" xmlns:ns1="http://www.mulesoft.org/schema/mule/file" name="List_Files" connector-ref="FILE_Configuration" path="$_globalVariables/ns3:GlobalVariables/Connections/FILE/outDir" posX="821" posY="214" type="ListFilesActivity"/><file:write config-ref="File_Config" path="/"  xmlns:ns0="http://www.mulesoft.org/schema/mule/core" xmlns:ns1="http://www.mulesoft.org/schema/mule/file" name="Write_File" connector-ref="FILE_Configuration" path="concat($_globalVariables/ns3:GlobalVariables/Connections/FILE/outDir, Log.txt)" posX="823" posY="314" type="FileWriteActivity"/></flow></mule>