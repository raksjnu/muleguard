<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd http://www.mulesoft.org/schema/mule/ee/dw http://www.mulesoft.org/schema/mule/ee/dw/current/dw.xsd "><flow name="createOrderREST"><flow-ref name="LogandErrorHandlerDummy"  doc:name="Errorhandler"  /><logger  level="USER" message="concat(Order created: , $Start/orderRequest/order/ns:customer/ns:customerid,-, $Start/orderRequest/order/ns:customer/ns:firstname, -ProcessId-, $_processContext/ns3:ProcessContext/ProcessId)                        <xsl:value-of xmlns:xsl=http://www.w3.org/1999/XSL/Transform select=$Start/orderRequest/order/ns:customer/ns:customerid/>                    " /><ee:transform xmlns:ns0="http://www.mulesoft.org/schema/mule/core" xmlns:ns1="http://www.mulesoft.org/schema/mule/ee/core" name="Map_Data" type="MapperActivity" posX="412" posY="99"><ee:message><ee:set-payload><![CDATA[%dw 2.0
output application/xml
---
{
<?xml version="1.0" encoding="UTF-8"?>
<config>
            <element ref="ns:order"/>
        </config>
<?xml version="1.0" encoding="UTF-8"?>
<ns0:inputBindings xmlns:ns0="http://xmlns.tibco.com/bw/process/2003">
            <ee:order xmlns:ns1="http://xmlns.example.com/unique/default/namespace/1134438639123">
                <ee:orderid>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select=""/>
                </ee:orderid>
                <ee:customerid>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$Start/orderRequest/order/ns:customer/ns:customerid"/>
                </ee:customerid>
                <ee:firstname>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$Start/orderRequest/order/ns:customer/ns:firstname"/>
                </ee:firstname>
                <ee:lastname>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$Start/orderRequest/order/ns:customer/ns:lastname"/>
                </ee:lastname>
                <ee:productcode>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="UPS00"/>
                </ee:productcode>
                <ee:price>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="1000"/>
                </ee:price>
                <ee:discountstatus>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="if ($Start/orderRequest/order/ns:customer/ns:age>40) then Discount applied else Discount not eligible"/>
                </ee:discountstatus>
                <ee:orderdatetime>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="current-dateTime()"/>
                </ee:orderdatetime>
            </ee:order>
        </ns0:inputBindings>}]]></ee:set-payload></ee:message></ee:transform><flow-ref name="UpdatePaymentDummy"  doc:name="UpdateOrderDetails"  /><ee:transform xmlns:ns0="http://www.mulesoft.org/schema/mule/core" xmlns:ns1="http://www.mulesoft.org/schema/mule/ee/core" name="Render_JSON" type="JSONRenderActivity" posX="783" posY="105"><ee:message><ee:set-payload><![CDATA[%dw 2.0
output application/xml
---
{
<?xml version="1.0" encoding="UTF-8"?>
<config>
            <SchemaType>xsdType</SchemaType>
            <BadgerfishCheck>false</BadgerfishCheck>
            <ActivityInputEditor>
                <xs:element xmlns:xs="http://www.w3.org/2001/XMLSchema" name="Status">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="Code" type="xsd:string" minOccurs="0"/>
                            <xs:element name="Message" type="xsd:string" minOccurs="0"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </ActivityInputEditor>
        </config>
<?xml version="1.0" encoding="UTF-8"?>
<ns0:inputBindings xmlns:ns0="http://xmlns.tibco.com/bw/process/2003">
            <ee:ActivityInputClass xmlns:ns1="http://www.tibco.com/namespaces/tnt/plugins/json">
                <Status>
                    <Code>
                        <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="000"/>
                    </Code>
                    <Message>
                        <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="Update Received"/>
                    </Message>
                </Status>
            </ee:ActivityInputClass>
        </ns0:inputBindings>}]]></ee:set-payload></ee:message></ee:transform></flow></mule>